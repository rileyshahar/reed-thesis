% vim:ft=tex

The notion of a \emph{category}, originally developed as an abstraction for
certain ideas in pure mathematics, turns out to be the natural algebraic
axiomatization of a collection of strongly typed, composable processes, such as
functions in a strongly typed programming language. In this section, we will
develop the basic theory of categories, prioritizing examples from computer
science where possible\footnote{
  Basic texts on category theory include \cite{maclane-1971} and
  \cite{riehl-2017}, while the connection to computer science is explored
  in~\cite{pierce-1991} and~\cite{barr-wells-1990}. A more advanced treatment of
  the connection, especially applications to programming language theory,
  is~\cite{jacobs-1999}.
}.


\section{Categories}

% TODO: introduction and motivation of some sort

\begin{dfn}[Category]\label{def:category}
	A \emph{category} $\cat{C}$ consists of the following data:
	\begin{itemize}
		\item a collection\footnote{We use the word \emph{collection} for foundational reasons: in
			      many important examples, the objects and morphisms do not form sets. We ignore
			      such foundational issues here; they are discussed in~\cite[Section
				      1.6]{maclane-1971}.} of objects, overloadingly also called $\cat{C}$;
		\item for each pair of objects $x,y \in  \cat{C}$, a collection of \emph{morphisms} $\cat{C}(x, y)$;
		\item for each object $x \in \cat{C}$, a designated \emph{identity morphism} $x \xrightarrow{1_x}  x$;
		\item for each pair of morphisms $x \xrightarrow{f}  y \xrightarrow{g}  z$, a designated \emph{composite morphism} $x \xrightarrow{gf}  z$.
	\end{itemize}
	This data must satisfy the following axioms:
	\begin{itemize}
		\item \emph{unitality}: for any $x \xrightarrow{f}  y$, $1_yf = f = f1_x$;
		\item \emph{associativity}: for any $x \xrightarrow{f} 		y \xrightarrow{g} z \xrightarrow{h} w$, $(hg)f = h(gf)$.
	\end{itemize}
	\begin{fig}[H]
		\centering
		\begin{tikzcd}
			x\ar[r, "f"]\ar[rr, "gf", bend left=60] &
			y\ar[r, "g"]\ar[rr, "hg"', bend right=60] &
			z\ar[r, "h"] & w
		\end{tikzcd}
		\begin{tikzcd}
			x\ar[r, "1_x"]\ar[rd, "f"'] & x\ar[d, "f"] \\
			& y
		\end{tikzcd}
		\begin{tikzcd}
			x\ar[r, "f"]\ar[rd, "f"'] & y\ar[d, "1_y"] \\
			& y\punctuation{.}
		\end{tikzcd}
		\caption{The category axioms.}
		\label{fig:category axioms}
	\end{fig}
\end{dfn}

\begin{ntn}
  In addition to those used above, many syntaxes are common for basic
  categorical notions. \begin{itemize}
    \item A morphism $f\in\cat{C}(x, y)$ is often written $f\colon x\to y$ or $x\xto{f} y$; $x$ is
      called its \emph{domain} or \emph{source} and $y$ is called it \emph{codomain}
      or \emph{target}.
    \item Morphisms may be called maps, arrows, or homomorphisms; the class of morphisms $\cat{C}(x, y)$ may also be written
      $\Hom_{\cat{C}}(x, y)$ or just $\Hom(x, y)$.
    \item Composition is written $gf$ or $g\circ f$, or sometimes in the left-to-right
      order $fg$.
    \item Identities are written $1_x$, $\id_x$, or just $x$ where the context
      is clear\footnote{I agree
      with Harold Simmons, who says that this last is ``a notation so ridiculous
      it should be laughed at in the street''~\cite[p. 5]{simmons-2011}.}.
    \end{itemize}
\end{ntn}

\begin{ex}[Functional Programming Languages]\label{ex:functional programming}
  Consider some strongly-typed functional programming language $L$, whose functions
  are never side-effecting. Then under very modest assumptions about $L$, we
  can make a category $\cat{L}$, as follows:
  \begin{itemize}
    \item the objects of $\cat{L}$ are the types of $L$;
    \item the morphisms $\cat{L}(A, B)$ are the functions of type $A\to B$;
    \item the identities $1_A$ are the identity functions $\lambda (x: A).x$;
    \item composition of morphisms are the usual function composition.
  \end{itemize}

  If $L$ is truly non-side-effecting, then it's straightforward to check
  that this construction does indeed satisfy the axioms of a category; see for
  instance~\cite[Section 2.2]{barr-wells-1990} to see the necessary assumptions
  spelled out rigorously.
\end{ex}

\noindent
Categories are also widespread in mathematics, as the following examples show.

\begin{ex}[Concrete Categories]\label{ex:concrete categories}The following are all categories:
	\begin{itemize}
		\item $\scat{Set}$ is the category of sets and functions.
		\item $\scat{Grp}$ is the category of groups and group homomorphisms.
		\item $\scat{Ring}$ is the category of rings and ring homomorphisms.
		\item $\scat{Top}$ is the category of topological spaces and homeomorphisms.
		\item For any field $\kk$, $\scat{Vect}_\kk$ is the category of vector
		      spaces over $\kk$ and linear transformations.
	\end{itemize}
\end{ex}

\noindent
We call such categories, whose objects are structured sets and whose morphisms
are structure-preserving set-functions, \emph{concrete}. On the other hand, many
categories look quite different.

\begin{ex}\label{ex:abstract categories}The following are also categories:
	\begin{itemize}
		\item The \emph{empty category} has no objects and no morphisms.
		\item The \emph{trivial category} has a single object and its identity morphism.
		\item Any group (or, more generally, monoid) can be thought of as a category
		      with a single object, a morphism for every element, and composition
		      given by the monoid multiplication.
		\item Any poset (or, more generally, preorder) $(P, \leq)$ can be thought
		      of as a category whose objects are the elements of $P$, with a unique
		      morphism $x\rightarrow y$ if and only if $x\leq y$. In this sense,
		      composition is a ``higher-dimensional'' transitivity, and identities are
		      higher-dimensional reflexivity.
		\item Associated to any directed graph is the \emph{free category} on the
		      graph, whose objects are nodes and whose morphisms are paths. In
          particular, the identities are just the empty paths, while composition
          concatenates two paths.
		      % This higher dimensional stuff is cool and it's how I think about these
		      % objects, but probably not necessary for our purposes. --riley
		\item There is a category whose objects are (roughly) multisets of molecules
		      and whose morphisms are chemical reactions. See \cite{baez-2017} for a
		      formalization of this notion.
	\end{itemize}
\end{ex}

% \begin{ntn}
%   There are many common notational conventions for categories. For clarity, we
%   will sometimes write $g\circ f$ for the composite $gf$.
% \end{ntn}

\noindent
When working with categories, we often want to show that two complex composites
equate. In this case, we prefer graphical notation to the more traditional
symbolic equalities of \Cref{def:category}. The key idea is that such diagrams
can be ``pasted'', allowing us to build up complex equalities from simpler ones.

\begin{dfn}[Commutative Diagram]\label{def:commutative diagram}
	A diagram\footnote{The notion of a diagram can be made precise fairly easily;
		see~\cite[Section 1.6]{riehl-2017}.} \emph{commutes} if, for any pair of paths
	through the diagram with the same start and end, the composite morphisms are
	equal.
\end{dfn}

\begin{ex}
	In this language, the axioms of \Cref{def:category} are expressed by commutativity of the
	diagrams in \Cref{fig:category axioms}.
\end{ex}

\section{Functors}


